\begin{enumerate}[label=\arabic*.,ref=\theenumi]
%\begin{enumerate}[label=\thesubsection.\arabic*.,ref=\thesubsection.\theenumi]
\item The STM32F103C8T6 micro-controller in Fig. \ref{fig:stm_blue} has two ground pins, few analog input pins and few digital pins that can be used for both input as well as output. It has one Vcc (3.3V) pin that can generate 3.3$V$.  In the following exercises, only the GND, 3.3$V$ and digital pins will be used.
%
\begin{figure}[!htb]
\begin{center}
\includegraphics[width=\columnwidth]{stm32/sevenseg/figs/stm_blue}
\end{center}
\caption{Pin Connections of STM-32}
\label{fig:stm_blue}
\end{figure}
\item Make the connections as per the Table \ref{table:USB-UART_connections}
\begin{table}[!h]
\centering
\input{stm32/ardsetup/tables/connections.tex}
\caption{STM32 to USB-UART connections}
\label{table:USB-UART_connections}
\end{table}
\item Basic onchip led blink program is available at 
\begin{lstlisting}
stm32/setup/codes/src/blink.c
\end{lstlisting}
\item Make sure that platformio.ini file has the following lines
\begin{lstlisting}
[env:bluepill_f103c8]
platform = ststm32
framework = arduino
board = bluepill_f103c8
\end{lstlisting}
\item Now, complile the blink program
\begin{lstlisting}
cd stm32/ardsetup/codes
pio run
\end{lstlisting}
\item With this .bin file will be generated and all the necessary packages will be installed.
\item Before flashing, make sure that STM32 board is in Programming mode
\item See how to enable programming mode in \figref{fig:programming_mode}. This configuration will ensure that the microcontroller enters the system memory programmer on reset.
\begin{figure}[!htb]
\begin{center}
\includegraphics[width=\columnwidth]{stm32/ardsetup/figs/programming_mode.png}
\end{center}
\caption{STM32 Operating and Programming mode}
\label{fig:programming_mode}
\end{figure}
\item After executing 
\begin{lstlisting}
Install STM32-Utils app from playstore
Give the necessary permissions
Connect the USB-UART to OTG
Upload the .bin file to the STM32 board
\end{lstlisting}
\item The inbuilt LED present on the STM32F103C8T6 will start blinking.
\item Change the STM32 board to operating mode as shown in Fig \ref{fig:programming_mode} in order to run your code from the main flash memory.
\end{enumerate}


